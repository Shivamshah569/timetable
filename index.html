<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable Master - Firebase Integrated</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-analytics.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js";
        
        // Your web app's Firebase configuration (as provided)
        const firebaseConfig = {
            apiKey: "AIzaSyCGAV49jA7NBIB0MSHUIWc_1abSrIiRdUo",
            authDomain: "periodperfect-f7909.firebaseapp.com",
            projectId: "periodperfect-f7909",
            storageBucket: "periodperfect-f7909.appspot.com",
            messagingSenderId: "282324074669",
            appId: "1:282324074669:web:fdfaafbdc40fe5b88ec624",
            measurementId: "G-0459NGGPFH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        
        // Make Firebase available globally for script.js
        window.firebase = {
            db, doc, setDoc, getDoc
        };
        
        console.log("Firebase initialized successfully!");
    </script>
</head>
<body>
    <div id="firebaseStatus" class="firebase-status">
        <i class="fas fa-circle-notch fa-spin"></i> Connecting to Firebase...
    </div>

    <header>
        <div class="container">
            <h1><i class="fas fa-calendar-alt"></i> Timetable Master</h1>
            <div class="tagline">Firebase Integrated - Your data is now saved automatically!</div>
            <p class="subtitle">Advanced timetable generation with cloud storage and no data loss</p>
        </div>
    </header>

    <main class="container">
        <div class="card animated">
            <h2 class="card-title"><i class="fas fa-cog"></i> Configuration</h2>
            
            <div class="requirement">
                <h3><i class="fas fa-info-circle"></i> Timetable Structure</h3>
                <p>9 periods per day: 4 before lunch, 1 lunch break, 4 after lunch</p>
                <p>Each teacher: max 3 periods/day, 13 periods/week</p>
                <div class="feature-highlight">All data is automatically saved to Firebase Firestore</div>
            </div>
            
            <div class="section-config">
                <h3 style="margin-bottom: 1rem; color: var(--secondary);">Section Configuration</h3>
                
                <div class="config-controls">
                    <div class="input-group">
                        <label for="sectionCount">Number of Sections</label>
                        <input type="number" id="sectionCount" min="1" value="5" max="10">
                    </div>
                    <button class="config-btn" id="setupSectionsBtn"><i class="fas fa-plus"></i> Setup Sections</button>
                </div>
                
                <div id="sectionsContainer">
                    </div>
            </div>
            
            <div id="subjectConfiguration" style="display: none;">
                <h3 style="margin-bottom: 1rem; color: var(--secondary);">Subject Configuration</h3>
                <div id="subjectTabs" class="controls">
                    </div>
                
                <div id="subjectTabContent">
                    </div>
            </div>
            
            <div id="teacherConfiguration" style="display: none;">
                <h3 style="margin-bottom: 1rem; color: var(--secondary);">Teacher Management</h3>
                <div class="input-group">
                    <label for="teacherCount">Number of Teachers</label>
                    <input type="number" id="teacherCount" min="5" value="15" max="40">
                </div>
                
                <div id="teacherSpecialization">
                    <h3 style="margin: 1.5rem 0 1rem 0; color: var(--secondary);">Teacher Specialization Setup</h3>
                    <div id="teacherList">
                        </div>
                </div>
            </div>
            
            <div class="controls">
                <button id="generateBtn" class="btn-generate pulse">
                    <i class="fas fa-cogs"></i> Generate Perfect Timetable
                </button>
                <button id="saveBtn" class="btn-generate btn-save">
                    <i class="fas fa-save"></i> Save to Cloud
                </button>
                <button id="loadBtn" class="btn-generate btn-load">
                    <i class="fas fa-download"></i> Load from Cloud
                </button>
            </div>
        </div>

        <div id="timetableCard" class="card animated" style="display: none;">
            <h2 class="card-title"><i class="fas fa-table"></i> Generated Timetable - <span id="currentSection">Section 1</span></h2>
            <div class="timetable-container">
                <table>
                    <thead>
                        <tr>
                            <th>Time/Day</th>
                            <th>Monday</th>
                            <th>Tuesday</th>
                            <th>Wednesday</th>
                            <th>Thursday</th>
                            <th>Friday</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
            
            <div class="controls" id="sectionButtons">
                </div>
            
            <div class="stats">
                <div class="stat-box">
                    <h3 id="totalClasses">0</h3>
                    <p>Total Classes Weekly</p>
                </div>
                <div class="stat-box">
                    <h3 id="assignedClasses">0</h3>
                    <p>Assigned Classes</p>
                </div>
                <div class="stat-box">
                    <h3 id="teacherLoad">0</h3>
                    <p>Avg. Teacher Load</p>
                </div>
                <div class="stat-box">
                    <h3 id="freePeriods">0</h3>
                    <p>Free Periods</p>
                </div>
            </div>
        </div>

        <div id="teachersCard" class="card animated" style="display: none;">
            <h2 class="card-title"><i class="fas fa-chalkboard-teacher"></i> Teacher Assignments & Workload</h2>
            <div id="teachersList">
                </div>
        </div>
    </main>

    <script src="script.js" defer></script>
</body>
</html>